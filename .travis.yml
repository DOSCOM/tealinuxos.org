language: node_js
node_js:
- "5"
branches:
  only:
  - master
before_install:
- npm install -g hexo
install:
- npm install
before_script:
- git config --global user.name 'tealinuxos via Travis CI'
- git config --global user.email 'mailpakgasing@gmail.com'
script:
- hexo clean
- hexo generate
after_success:
- 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash mkdir .deploy; fi'
- 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash cd .deploy; fi'
- 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash git init; fi'
- 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash git remote add origin $DEPLOY_REPO; fi'
- 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash cp -r ../public/* .; fi'
- 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash git add -A .; fi'
- 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash git commit -m 'Site updated'; fi'
- 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash git push --force --quiet origin master; fi'

# - mkdir .deploy
# - cd .deploy
# - git init
# - git remote add origin $DEPLOY_REPO
# - cp -r ../public/* .
# - git add -A .
# - git commit -m 'Site updated'
# - git push --force --quiet origin master
